@{
    string role = HttpContext.Current.Session["role"].ToString(); // assuming correct reference to Session["key"]
    string profileimg = HttpContext.Current.Session["img"].ToString(); // assuming correct reference to Session["key"]
    string title = HttpContext.Current.Session["title"].ToString();
    string name = HttpContext.Current.Session["name"].ToString();
    var userid = Newtonsoft.Json.JsonConvert.DeserializeObject<Core.Models.TokenViewModel>
    (HttpContext.Current.Session[WebApplication5.Models.UserToken.USER_SESSION_VALUE].ToString()).authData.userId;
}
<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <title>@ViewData["Title"] - HextureMMS</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="~/Content/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/Content/css/bootstrap-rtl.min.css" rel="stylesheet">
    <link href="~/Content/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="~/Content/css/style.css" rel="stylesheet">
    <link href="~/Content/css/animate.css" rel="stylesheet">
    <link href="~/Content/css/plugins/switchery/switchery.css" rel="stylesheet">
    <link href="~/Content/css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">
    <link href="~/Content/css/plugins/chosen/chosen.css" rel="stylesheet">
    <link href="~/Content/css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="~/Content/css/plugins/fullcalendar/fullcalendar.css" rel="stylesheet">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>



    <style>
        a {
            text-decoration: none;
            color: black;
        }

            a:visited {
                color: black;
            }

        .box::-webkit-scrollbar-track {
            -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
            background-color: #F5F5F5;
            border-radius: 5px
        }

        .box::-webkit-scrollbar {
            width: 10px;
            background-color: #F5F5F5;
            border-radius: 5px
        }

        .box::-webkit-scrollbar-thumb {
            background-color: black;
            border: 2px solid black;
            border-radius: 5px
        }

        header {
            -moz-box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.1);
            box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.1);
            height: 140px;
            vertical-align: middle;
        }

        h1 {
            float: left;
            padding: 4px 30px;
            line-height: 120px;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Raleway', sans-serif;
        }

        .icons {
            float: left;
            position: absolute;
            top: 0;
            left: 0;
        }

        .notification {
            padding-top: 30px;
            position: relative;
        }

        .number {
            height: 24px;
            width: 24px;
            background-color: #d63031;
            border-radius: 20px;
            color: white;
            text-align: center;
            position: absolute;
            top: 27px;
            left: 57px;
            padding: 3px;
            border-style: solid;
            border-width: 2px;
            border-color: #406847;
        }

            .number:empty {
                display: none;
            }

        .notBtn {
            transition: 0.5s;
            cursor: pointer
        }

        .fas {
            font-size: 25pt;
            padding-bottom: 10px;
            color: black;
            margin-right: 40px;
            margin-left: 40px;
        }

        .box {
            width: 400px;
            height: 0px;
            border-radius: 10px;
            transition: 0.5s;
            position: left;
            overflow-y: scroll;
            padding: 0px;
            left: -300px;
            margin-top: 5px;
            background-color: #F4F4F4;
            -webkit-box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.2);
            -moz-box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.1);
            box-shadow: 10px 10px 23px 0px rgba(0,0,0,0.1);
            cursor: context-menu;
        }

        .fas:hover {
            color: #d63031;
        }

        .notBtn:hover > .box {
            height: 60vh
        }

        .content {
            padding: 20px;
            color: black;
            vertical-align: middle;
            text-align: left;
        }

        .gry {
            background-color: #F4F4F4;
        }

        .top {
            color: black;
            padding: 10px
        }

        .display {
            position: relative;
        }

        .cont {
            position: absolute;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: #F4F4F4;
        }

            .cont:empty {
                display: none;
            }

        .stick {
            text-align: center;
            display: block;
            font-size: 50pt;
            padding-top: 70px;
            padding-left: 80px
        }

            .stick:hover {
                color: black;
            }

        .cent {
            direction: rtl;
            text-align: center;
            display: block;
        }

        .sec {
            display: flex;
            justify-content: left;
            align-items: left;
            padding: 25px 30px;
            background-color: #F4F4F4;
            transition: 10s;
        }

        .profCont {
            text-align: left;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        .txt {
            vertical-align: top;
            font-size: 1.25rem;
            padding: 5px 25px 0px 10px;
            text-align: right;
        }

        .sub {
            font-size: 1rem;
            color: grey;
        }

        .new {
            border-style: none none solid none;
            border-color: red;
        }

        .sec:hover {
            background-color: #BFBFBF;
        }

        .fixedsidebar {
            top: 160px;
            background-color: #406847;
            position: fixed;
            height: 100%;
            /*z-index: 998;*/
            max-height: Calc(100% - 137px) !important;
            overflow: auto;
        }

        .Mtitle {
            float: right;
            position: fixed;
            top: 0;
            right: 0;
        }
        .Ytitle {
            color: #bba20b;
            font-size: 40px;
        }

    </style>
</head>


<body>
    <div class="fixedbg"></div>
    <div id="header_container">
        <div class="col-lg-12">
            <div class="Mtitle">
                <a href="@Url.Action("UpdateProfile","Users")">
                    <img class="fixedimg" src="../@profileimg" height="110px" width="110px">
                </a>
                <div class="fixedtext">
                    <div class="fixedtextname">@name</div>
                    <div class="fixedtexttitle">@title</div>
                </div>
            </div>
        </div>
        <div class="row">
            <h1> <span class="Ytitle">إدارة</span>&nbsp;<span class="Ytitle">اللجان</span>&nbsp;<span class="Ytitle">والإجتماعات</span> </h1>
            <div class="icons">
                <div class="notification">
                    <div class="notBtn" href="#">
                        <!--Number supports double digets and automaticly hides itself when there is nothing between divs -->
                        <div class="number">6</div>
                        <i class="fas fa-bell" style="color:white"></i>
                        <div class="box">
                            <div class="display">
                                <div class="nothing">
                                    <i class="fas fa-child stick"></i>
                                </div>
                                <div class="cont">
                                    <!-- Fold this div and try deleting evrything inbetween -->

                                    <div class="sec">
                                        <a href="https://codepen.io/Golez/">
                                            <div style="display:flex;justify-content:space-between;align-items:center">
                                                <span class="material-symbols-outlined icon">
                                                    groups
                                                </span>
                                                <div class="profcont">
                                                    <div class="txt">مرحبا خالد تذكير لديك اجتماع اليوم الساعة 8:00 صباحا لتفاصيل الاجتماع اضغط هنا </div>
                                                    <div class="txt sub">11/6 - 4:04 pm</div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>

                                    <div class="sec">
                                        <a href="https://codepen.io/Golez/">
                                            <div style="display:flex;justify-content:space-between;align-items:center">
                                                <span class="material-symbols-outlined">
                                                    forward_to_inbox
                                                </span>
                                                <div class="profCont">
                                                    <div class="txt">هلا مهندس محمد تذكير لديك دعوه من قبل مدير المنتجات لحضور اجتماع في حال رغبتك بقبول او رفض الدعوه اضغط هنا </div>
                                                    <div class="txt sub">11/6 - 4:04 pm</div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>

                                    <div class="sec">
                                        <a href="https://codepen.io/Golez/">
                                            <div style="display:flex;justify-content:space-between;align-items:center">
                                                <span class="material-symbols-outlined">
                                                    forward_to_inbox
                                                </span>
                                                <div class="profCont">
                                                    <div class="txt">
                                                        لقد تمت دعوتك إلى "اجتماع المبيعات السنوي" في فندق إنتركونتيننتال من قبل أبو عبدالله  السبيعي
                                                    </div>
                                                    <div class="txt sub">31/8 - 3:00 am</div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>

                                    <div class="sec">
                                        <a href="https://codepen.io/Golez/">
                                            <div style="display:flex;justify-content:space-between;align-items:center">
                                                <span class="material-symbols-outlined icon">
                                                    groups
                                                </span>
                                                <div class="profCont">
                                                    <div class="txt">
                                                        تذكير الاجتماع القادم توقعات المبيعات الاسبوعيه غدًا في قاعات الاجتماعات رقم -2
                                                    </div>
                                                    <div class="txt sub">11/6 - 4:00 pm</div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>

                                    <div class="sec">
                                        <a href="https://codepen.io/Golez/">
                                            <div style="display:flex;justify-content:space-between;align-items:center">
                                                <span class="material-symbols-outlined">
                                                    forward_to_inbox
                                                </span>
                                                <div class="profCont">
                                                    <div class="txt">
                                                        تذكير لديك دعوه من قبل خالد عبدالله في قاعه الاجتماعات الكبرى غداً
                                                    </div>
                                                    <div class="txt sub">11/6 - 5:00 pm</div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>

                                    <div class="sec">
                                        <a href="https://codepen.io/Golez/">
                                            <div style="display:flex;justify-content:space-between;align-items:center">
                                                <span class="material-symbols-outlined icon">
                                                    groups
                                                </span>
                                                <div class="profCont">
                                                    <div class="txt">تذكير لديك " اجتماع مراجعة الاداء اليومي مع الفريق اليوم في غرفه الاجتماعات رقم 1 </div>
                                                    <div class="txt sub">11/6 - 4:04 pm</div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="containervav">
        <div class="sidebar">
            <nav class="fixedsidebar navbar-static-side " role="navigation">
                <div class="sidebar-collapse scroll-container ">
                    @if (role == "Admin")
                    {
                        @Html.Partial("_AdminNav")
                    }
                    else if (role == "Director")
                    {
                        @Html.Partial("_DirectorNav")
                    }
                    else if (role == "SystemDirector")
                    {
                        @Html.Partial("_SystemDirectorNav")
                    }
                    else if (role == "SimpleUser")
                    {
                        @Html.Partial("_SimpleUserNav")
                    }

                </div>
            </nav>
        </div>

    </div>



    <div class=" containerFixed">
        @RenderBody()
    </div>
    <div class="footer" style="text-align: center;">
        <div id="footer">
            <strong style="color:#333;"> جميع الحقوق محفوظة - خلايا المستقبل للاتصالات وتقنية المعلومات</strong>&copy; 2023
        </div>
    </div>
    <div style="z-index: 11111111; background-color: #bba20b; color: #fff " id="snackbar">تمت العملية بنجاح</div>
    <div style="z-index:11111111;background-color:red;color:#fff" id="snackbarerror">الرجاء تعبئة كل الخانات !</div>
    <div style="z-index:11111111;background-color:red;color:#fff" id="snackbarerrorrequest">للاسف العملية لم تتم الرجاء طلب المساعدة !</div>
    <div style="z-index: 11111111; background-color: #bba20b; color: #fff " id="snackbarstartrequest">العملية جارية...</div>
    <div style="z-index:11111111;background-color:red;color:#fff" id="snackbardenied">لا يمكن حذف هذا المستخدم !</div>
    <section class="custom-social-proof" style="display:none">
        <div class="custom-notification" style="
    text-align: revert;
    color: #155724;
    background-color: #d4edda;
    border-color: #c3e6cb;
    color: black;
    font-weight: bold;
">
            <div class="custom-notification-container" style="
    padding: 20px;
">
                <div class="custom-notification-image-wrapper">
                    <img id="notiimg" src="https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg">
                </div>
                <div class="custom-notification-content-wrapper">
                    <h2 id="notititle" style="
    margin-top: 0;
    /* margin-bottom: 34px; */
    color: black;
    font-weight: bold;
"></h2>
                    <p class="custom-notification-content">

                    </p>
                </div>
            </div>
            <div class="custom-close"></div>
        </div>
    </section>
    <script src="~/Content/js/jquery-2.1.1.js"></script>
    <script src="~/Content/js/code.js"></script>
    <script src="~/Content/js/inspinia.js"></script>
    <script src="~/Content/js/jquery-ui.custom.min.js"></script>
    <script src="~/Content/js/bootstrap.min.js"></script>
    <script src="~/Content/js/plugins/pace/pace.min.js"></script>
    <script src="~/Content/js/plugins/fullcalendar/fullcalendar.min.js"></script>
    <script src="~/Content/js/plugins/fullcalendar/moment.min.js"></script>
    <script src="~/Content/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="~/Content/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <script src="~/Content/js/plugins/iCheck/icheck.min.js"></script>
    <script src="~/Content/js/plugins/jsKnob/jquery.knob.js"></script>
    <script src="~/Content/js/plugins/switchery/switchery.js"></script>
    <script src="~/Content/js/plugins/dataTables/jquery.dataTables.js"></script>
    <script src="~/Content/js/plugins/dataTables/dataTables.bootstrap.js"></script>
    <script src="~/Content/js/plugins/chosen/chosen.jquery.js"></script>
    <script src="~/Content/js/plugins/staps/jquery.steps.min.js"></script>
    <script src="~/Content/js/plugins/validate/jquery.validate.min.js"></script>
    <script src="~/Content/js/chart.min.js"></script>

    <script src="~/Scripts/jquery.signalR-2.2.2.js"></script>
    <script src="~/signalr/hubs"></script>


    <!-- Page-Level Scripts -->
    <script>
        var hub
        $(document).ready(function () {
            $('.dataTables-example').dataTable({
                responsive: true,
                "dom": 'T<"clear">lfrtip',
                "tableTools": {
                    "sSwfPath": "js/plugins/dataTables/swf/copy_csv_xls_pdf.swf"
                }
            });
        });
        $(document).ready(function () {
             hub = $.connection.notificationHub;
            $.connection.hub.start()
                .done(function () {
                    console.log("Hub Connected!");
                        hub.server.connect("@userid").done(function (other_users) {

                    });
                })
                .fail(function () {
                    console.log("Could not Connect!");
                });
            hub.client.broadcaastNotif = function (total, title, img,userid) {
                console.log(total)
                $(".custom-notification-content").html(total);
                $("#notiimg").attr("src", img)
                $("#notititle").html(title)
                $(".custom-social-proof").stop().slideToggle('slow');
                setTimeout(function () { $(".custom-social-proof").stop().slideToggle('slow');}, 3000);
                LoadNotification(userid)
            }
        });
        function LoadNotification(userid) {
            $.ajax({
                type: "../Home/GetNotifications",
                url: "Get",
                data: {
                    userId: userid
                },
            }).done(function (result) {
                if (result) {
                  $("#notidiv").html(result)
                }

            }).fail(function (data) {
                // Optionally alert the user of an error here...
            });
        }
    </script>


    <script>
        $(document).ready(function () {
            var elem = document.querySelector('.js-switch');
            var switchery = new Switchery(elem, { color: '#1AB394' });

            var elem_2 = document.querySelector('.js-switch_2');
            var switchery_2 = new Switchery(elem_2, { color: '#ED5565' });

            var elem_3 = document.querySelector('.js-switch_3');
            var switchery_3 = new Switchery(elem_3, { color: '#1AB394' });
        });
        var config = {
            '.chosen-select': {},
            '.chosen-select-deselect': { allow_single_deselect: true },
            '.chosen-select-no-single': { disable_search_threshold: 10 },
            '.chosen-select-no-results': { no_results_text: 'Oops, nothing found!' },
            '.chosen-select-width': { width: "95%" }
        }
        for (var selector in config) {
            $(selector).chosen(config[selector]);
        }
    </script>

    <script>
        function addDataInvitedEmail() {
            var Invited_Email = document.getElementById("InvitedEmail").value;
            var Invited_Number = document.getElementById("InvitedNumber").value;
            var DropList_UserLevel = document.getElementById("DropListUserLevel").value;
            var Message_Type = document.querySelector('input[name="MessageType"]:checked').value;

            var Tabel_Invited = document.getElementById("TabelInvited");
            var row = Tabel_Invited.insertRow();
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);


            cell1.innerHTML = Tabel_Invited.rows.length - 1;
            cell2.innerHTML = Invited_Email;
            cell3.innerHTML = Invited_Number;
            cell4.innerHTML = DropList_UserLevel;
            cell5.innerHTML = Message_Type;
            cell6.innerHTML = '<button onclick="deleteRow(this)">Delete</button>';

            document.getElementById("InvitedEmail").value = '';
            document.getElementById("InvitedNumber").value = '';
            document.getElementById("DropListUserLevel").value = '';
            document.querySelector('input[name="MessageType"]:checked').checked = false;
        }

    </script>





    <script>
        var xValues = ["option1", "option2", "option3"];
        var yValues = [44, 24, 30];
        var barColors = ["red", "green", "blue"];
        new Chart("myChart", {
            type: "bar",
            data: {
                labels: xValues,
                datasets: [{
                    backgroundColor: barColors,
                    data: yValues
                }]
            },
            options: {
                legend: { display: false },
                title: {
                    display: true,
                }
            }
        });
    </script>

    <script>
        var voit = 2;
        const container = document.getElementById('input-cont');
        // Call addInput() function on button click
        function addInput() {
            voit++
            let input = document.createElement('input');
            input.placeholder = voit + ' إجابة التصويت';
            container.appendChild(input);
        }
    </script>


    <script>
        function deleteRow(button) {
            var row = button.parentNode.parentNode;
            row.parentNode.removeChild(row);
            // Update the count numbers of remaining rows
            var rows = document.querySelectorAll('#tableBody tr');
            for (var i = 0; i < rows.length; i++) {
                rows[i].cells[0].innerHTML = i + 1;
            }
        }
    </script>




    <script>

        const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');

        function switchTheme(e) {
            if (e.target.checked) {
                document.documentElement.setAttribute('data-theme', 'dark');
            }
            else {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        }

        //toggleSwitch.addEventListener('change', switchTheme, false);
        function switchTheme(e) {
            if (e.target.checked) {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark'); //add this
            }
            else {
                document.documentElement.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light'); //add this
            }
        }
        const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;

        if (currentTheme) {
            document.documentElement.setAttribute('data-theme', currentTheme);

            if (currentTheme === 'dark') {
                toggleSwitch.checked = true;
            }
        }

    </script>
    @RenderSection("Scripts", required: false)



</body>
</html>

@*<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>@ViewData["Title"] - HextureMMS</title>
        <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="~/css/site.css" />
    </head>
    <body>
        <header>
            <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
                <div class="container">
                    <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">HextureMMS</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse">
                        <ul class="navbar-nav flex-grow-1">
                            <li class="nav-item">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Index">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
        <div class="container">
            <main role="main" class="pb-3">
                @RenderBody()
            </main>
        </div>

        <footer class="border-top footer text-muted">
            <div class="container">
                &copy; 2023 - HextureMMS - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
            </div>
        </footer>
        <script src="~/lib/jquery/dist/jquery.min.js"></script>
        <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
        <script src="~/js/site.js" asp-append-version="true"></script>
        @RenderSection("Scripts", required: false)
    </body>
    </html>*@
